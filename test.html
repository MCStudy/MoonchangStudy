<html>
  <head>

  </head>
<body>

<canvas id="canvas" width=800 height=600></canvas>

</body>
<script src="lib/engine.js"></script>
<script>





var player = new Sprite(function(my){

  my.width = 50;
  my.height = 50;

  my.gravity = true;
  my.userControl = true;

  my.start(function(){

  });

  my.animate('1.png', 34, 37, function(){
    var left = 1,
        leftRun = 2,
        right = 0,
        rightRun = 3,
        jump = 4;

    // left
    if(LEFT_ARROW){
      my.state = leftRun;
    }
    else if(my.state == leftRun){
      my.state = left;
    }
    // right
    else if(RIGHT_ARROW){
      my.state = rightRun;
    }
    else if(my.state == rightRun){
      my.state = right;
    }
    // jump
    if(my.jump && (my.state == left || my.state == leftRun)){
      my.state = jump;
    }
    else if(!my.jump && my.state == jump){
      my.state = left;
    }
    else if(my.jump && (my.state == right || my.state == rightRun)){
      my.state = 5;
    }
    else if(!my.jump && my.state == 5){
      my.state = right;
    }

  });


  my.onCrash(function(direction, target){
    target.renderer(function(){
      ctx.beginPath();
      ctx.fillStyle = "rgba(0,0,0,100)";
      ctx.rect(target.x, target.y, target.width, target.height);
      ctx.fill();
    });

  });

}).draw(100,200);




for(var i=0; i<100; i++){
  new Sprite(function(my){
    my.width = 50;
    my.height = 10;
    my.static = true;

    my.renderer(function(){
      ctx.beginPath();
        ctx.fillStyle = "rgba(0,0,0,100)";
        ctx.rect(my.x, my.y, my.width, my.height);
        ctx.stroke();
    });

  }).draw(Math.random()*800, Math.random()*600);
}



</script>
</html>
